!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){var e=this;t(document).ready(function(){e.enable(),e.build()})},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){if(!(t("#lightbox").length>0)){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(e.$nav.css("pointer-events","none"),e.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(e),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})}},e.prototype.start=function(e){function i(t){n.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var n=this,o=t(window);o.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var a,r=0,s=e.attr("data-lightbox");if(s){a=t(e.prop("tagName")+'[data-lightbox="'+s+'"]');for(var l=0;l<a.length;l=++l)i(t(a[l])),a[l]===e[0]&&(r=l)}else if("lightbox"===e.attr("rel"))i(e);else{a=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var d=0;d<a.length;d=++d)i(t(a[d])),a[d]===e[0]&&(r=d)}var h=o.scrollTop()+this.options.positionFromTop,c=o.scrollLeft();this.$lightbox.css({top:h+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&t("html").addClass("lb-disable-scrolling"),this.changeImage(r)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var o=new Image;o.onload=function(){var a,r,s,l,d,h;n.attr({alt:i.album[e].alt,src:i.album[e].link}),t(o),n.width(o.width),n.height(o.height),i.options.fitImagesInViewport&&(h=t(window).width(),d=t(window).height(),l=h-i.containerPadding.left-i.containerPadding.right-i.imageBorderWidth.left-i.imageBorderWidth.right-20,s=d-i.containerPadding.top-i.containerPadding.bottom-i.imageBorderWidth.top-i.imageBorderWidth.bottom-120,i.options.maxWidth&&i.options.maxWidth<l&&(l=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<l&&(s=i.options.maxHeight),(o.width>l||o.height>s)&&(o.width/l>o.height/s?(r=l,a=parseInt(o.height/(o.width/r),10),n.width(r),n.height(a)):(a=s,r=parseInt(o.width/(o.height/a),10),n.width(r),n.height(a)))),i.sizeContainer(n.width(),n.height())},o.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(document).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){n.$lightbox.find(".lb-dataContainer").width(r),n.$lightbox.find(".lb-prevLink").height(s),n.$lightbox.find(".lb-nextLink").height(s),n.showImage()}var n=this,o=this.$outerContainer.outerWidth(),a=this.$outerContainer.outerHeight(),r=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,s=e+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;o!==r||a!==s?this.$outerContainer.animate({width:r,height:s},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(e){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")})}if(this.album.length>1&&this.options.showImageNumberLabel){var n=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(n).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):"n"!==i&&39!==e||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&t("html").removeClass("lb-disable-scrolling")},new e}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t,require("jquery")):t.lity=e(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t){var e=D();return K&&t.length?(t.one(K,e.resolve),setTimeout(e.resolve,500)):e.resolve(),e.promise()}function n(t,i,n){if(1===arguments.length)return e.extend({},t);if("string"==typeof i){if(void 0===n)return void 0===t[i]?null:t[i];t[i]=n}else e.extend(t,i);return this}function o(t){for(var e,i=decodeURI(t.split("#")[0]).split("&"),n={},o=0,a=i.length;o<a;o++)i[o]&&(e=i[o].split("="),n[e[0]]=e[1]);return n}function a(t,i){return t+(t.indexOf("?")>-1?"&":"?")+e.param(i)}function r(t,e){var i=t.indexOf("#");return-1===i?e:(i>0&&(t=t.substr(i)),e+t)}function s(t){return e('<span class="lity-error"/>').append(t)}function l(t,i){var n=i.opener()&&i.opener().data("lity-desc")||"Image with no description",o=e('<img src="'+t+'" alt="'+n+'"/>'),a=D(),r=function(){a.reject(s("Failed loading image"))};return o.on("load",function(){if(0===this.naturalWidth)return r();a.resolve(o)}).on("error",r),a.promise()}function d(t,i){var n,o,a;try{n=e(t)}catch(t){return!1}return!!n.length&&(o=e('<i style="display:none !important"/>'),a=n.hasClass("lity-hide"),i.element().one("lity:remove",function(){o.before(n).remove(),a&&!n.closest(".lity-content").length&&n.addClass("lity-hide")}),n.removeClass("lity-hide").after(o))}function h(t){var i=B.exec(t);return!!i&&f(r(t,a("https://www.youtube"+(i[2]||"")+".com/embed/"+i[4],e.extend({autoplay:1},o(i[5]||"")))))}function c(t){var i=L.exec(t);return!!i&&f(r(t,a("https://player.vimeo.com/video/"+i[3],e.extend({autoplay:1},o(i[4]||"")))))}function u(t){var i=H.exec(t);return!!i&&(0!==t.indexOf("http")&&(t="https:"+t),f(r(t,a("https://www.facebook.com/plugins/video.php?href="+t,e.extend({autoplay:1},o(i[4]||""))))))}function g(t){var e=P.exec(t);return!!e&&f(r(t,a("https://www.google."+e[3]+"/maps?"+e[6],{output:e[6].indexOf("layer=c")>0?"svembed":"embed"})))}function f(t){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+t+'"/></div>'}function b(){return A.documentElement.clientHeight?A.documentElement.clientHeight:Math.round(k.height())}function p(t){var e=w();e&&(27===t.keyCode&&e.options("esc")&&e.close(),9===t.keyCode&&m(t,e))}function m(t,e){var i=e.element().find(N),n=i.index(A.activeElement);t.shiftKey&&n<=0?(i.get(i.length-1).focus(),t.preventDefault()):t.shiftKey||n!==i.length-1||(i.get(0).focus(),t.preventDefault())}function v(){e.each(O,function(t,e){e.resize()})}function y(t){1===O.unshift(t)&&(z.addClass("lity-active"),k.on({resize:v,keydown:p})),e("body > *").not(t.element()).addClass("lity-hidden").each(function(){var t=e(this);void 0===t.data(W)&&t.data(W,t.attr(T)||null)}).attr(T,"true")}function x(t){var i;t.element().attr(T,"true"),1===O.length&&(z.removeClass("lity-active"),k.off({resize:v,keydown:p})),O=e.grep(O,function(e){return t!==e}),i=O.length?O[0].element():e(".lity-hidden"),i.removeClass("lity-hidden").each(function(){var t=e(this),i=t.data(W);i?t.attr(T,i):t.removeAttr(T),t.removeData(W)})}function w(){return 0===O.length?null:O[0]}function I(t,i,n,o){var a,r="inline",s=e.extend({},n);return o&&s[o]?(a=s[o](t,i),r=o):(e.each(["inline","iframe"],function(t,e){delete s[e],s[e]=n[e]}),e.each(s,function(e,n){return!n||!(!n.test||n.test(t,i))||(a=n(t,i),!1!==a?(r=e,!1):void 0)})),{handler:r,content:a||""}}function $(t,o,a,r){function s(t){h=e(t).css("max-height",b()+"px"),d.find(".lity-loader").each(function(){var t=e(this);i(t).always(function(){t.remove()})}),d.removeClass("lity-loading").find(".lity-content").empty().append(h),u=!0,h.trigger("lity:ready",[c])}var l,d,h,c=this,u=!1,g=!1;o=e.extend({},j,o),d=e(o.template),c.element=function(){return d},c.opener=function(){return a},c.options=e.proxy(n,c,o),c.handlers=e.proxy(n,c,o.handlers),c.resize=function(){u&&!g&&h.css("max-height",b()+"px").trigger("lity:resize",[c])},c.close=function(){if(u&&!g){g=!0,x(c);var t=D();if(r&&(A.activeElement===d[0]||e.contains(d[0],A.activeElement)))try{r.focus()}catch(t){}return h.trigger("lity:close",[c]),d.removeClass("lity-opened").addClass("lity-closed"),i(h.add(d)).always(function(){h.trigger("lity:remove",[c]),d.remove(),d=void 0,t.resolve()}),t.promise()}},l=I(t,c,o.handlers,o.handler),d.attr(T,"false").addClass("lity-loading lity-opened lity-"+l.handler).appendTo("body").focus().on("click","[data-lity-close]",function(t){e(t.target).is("[data-lity-close]")&&c.close()}).trigger("lity:open",[c]),y(c),e.when(l.content).always(s)}function C(t,i,n){t.preventDefault?(t.preventDefault(),n=e(this),t=n.data("lity-target")||n.attr("href")||n.attr("src")):n=e(n);var o=new $(t,e.extend({},n.data("lity-options")||n.data("lity"),i),n,A.activeElement);if(!t.preventDefault)return o}var A=t.document,k=e(t),D=e.Deferred,z=e("html"),O=[],T="aria-hidden",W="lity-"+T,N='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',j={esc:!0,handler:null,handlers:{image:l,inline:d,youtube:h,vimeo:c,googlemaps:g,facebookvideo:u,iframe:f},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},E=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,B=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,L=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,P=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,H=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,K=function(){var t=A.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return e[i];return!1}();return l.test=function(t){return E.test(t)},C.version="2.2.2",C.options=e.proxy(n,C,j),C.handlers=e.proxy(n,C,j.handlers),C.current=w,e(A).on("click.lity","[data-lity]",C),C});